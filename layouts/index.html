{{ define "main" }}
<section
  class="relative bg-cover bg-center min-h-screen min-h-dvh home"
  style="background-image: url('/images/circuit.jpg');"
>
  <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover">
    <source src="/videos/circuit.mp4" type="video/mp4">
  </video>
  <div class="absolute inset-0 bg-black bg-opacity-40"></div>

  <div class="absolute top-[70%] left-[5%] md:top-[55%] md:left-[10%] -translate-y-1/2 max-w-[90vw]">
    <div class="mb-8">
      <img
        src="/images/michelin_logo_2.png"
        alt="Michelin Logo"
        class="h-10 w-auto drop-shadow-md"
        style="height: 70px; width: auto;"
      />
    </div>

    <div class="text-white">
      <h1 class="text-3xl sm:text-4xl md:text-6xl md:leading-[1.1] font-bold uppercase">{{ T "home_title" | safeHTML }}</h1>
      <p class="text-md md:text-lg mt-5 text-gray-100">{{ T "home_subtitle" | safeHTML }}</p>

      <a href="#categories"
        class="w-full sm:w-auto text-center inline-block mt-12 px-6 py-2.5 rounded-full border-2 border-[#FFD700] text-white text-xl font-bold uppercase tracking-wide hover:bg-white hover:text-[#004B93] hover:border-transparent hover:shadow-lg transition-all duration-300 transform">
        {{ T "home_cta" }}
      </a>
    </div>
  </div>
</section>

<section id="categories" class="max-w-7xl mx-auto px-4 pb-8 pt-20">
  <h1 class="text-3xl font-bold text-center">{{ T "catalogue" }}</h1>

  <div class="max-w-5xl mx-auto mt-4 mb-10">
    <div class="prose prose-lg text-gray-700 leading-relaxed max-w-none text-center">
      <p>{{ T "catalogue_description" }}</p>
    </div>
  </div>
  <!-- Update grid to 4 x 2: 2 rows of 4 items each -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

    <!-- Rally: Asphalt -->
    <a href="{{ "rally/asphalt" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/asphalt/pilot_sport_a/tire.png" alt="Asphalt"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "asphalt" | default "Asphalt" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Rally: Gravel -->
    <a href="{{ "rally/gravel" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/gravel/pilot_sport_gravel/tire.png" alt="Gravel"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "gravel" | default "Gravel" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Rally: Snow & Ice -->
    <a href="{{ "rally/snow_and_ice" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/snow_and_ice/pilot_alpin/tire.png" alt="Snow & Ice"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "snow_and_ice" | default "Snow & Ice" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Circuit: Prototype Formula -->
    <a href="{{ "circuit/prototype_formula" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/prototype_formula/pilot_sport_m_s512/tire.png" alt="Prototype Formula"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "prototype_formula" | default "Prototype Formula" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Circuit: Touring GT -->
    <a href="{{ "circuit/touring_gt" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/touring_gt/pilot_sport_gt_m/tire.png" alt="Touring GT"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "touring_gt" | default "Touring GT" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Circuit: Porsche Cup -->
    <a href="{{ "circuit/porsche_cup" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/porsche_cup/pilot_sport_cup_n3_and_n3r/tire.png" alt="Porsche Cup"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "porsche_cup" | default "Porsche Cup" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Hillclimbing -->
    <a href="{{ "hillclimbing" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/subpages/hillclimbing/pilot_sport_h_s5c+/tire.png" alt="Hillclimbing"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "hillclimbing" | default "Hillclimbing" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

    <!-- Raid -->
    <a href="{{ "raid" | relLangURL }}"
      class="group bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col h-full relative">
      <div
        class="h-48 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6 relative overflow-hidden group-hover:from-[#004B93]/5 group-hover:to-[#004B93]/10 transition-colors duration-500">
        <div
          class="absolute w-40 h-40 bg-white rounded-full opacity-60 blur-2xl -top-5 -right-5 transform group-hover:scale-125 transition-transform duration-700">
        </div>
        <img src="/images/raid-tire.png" alt="Raid"
          class="relative z-10 w-full h-full object-contain transform group-hover:scale-105 group-hover:rotate-1 transition-transform duration-500 drop-shadow-md group-hover:drop-shadow-xl">
      </div>
      <div class="p-6 flex-grow flex flex-col items-center text-center relative z-20 bg-white">
        <h2
          class="text-lg font-bold text-gray-900 mb-2 group-hover:text-[#004B93] transition-colors uppercase italic tracking-wider">
          {{ T "raid" | default "Raid" }}</h2>
        <div
          class="w-10 h-1 bg-[#FFCD00] rounded-full mb-3 transform origin-center transition-all duration-300 group-hover:w-16">
        </div>
        <button
          class="px-6 py-2 bg-gray-50 text-[#004B93] font-bold rounded-full group-hover:bg-[#FFCD00] group-hover:text-[#004B93] transition-all duration-300 shadow-sm group-hover:shadow-md flex items-center gap-2 uppercase tracking-wide text-xs">
          {{ T "view_details" | default "View Details" }}
          <svg xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </a>

  </div>
</section>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const header = document.querySelector("header");
    const section = document.querySelector("section.home");
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    if (!header || !section || !mobileMenuButton || !mobileMenu) return;

    let isOpen = false;
    let isIntersecting = true;

    const updateHeader = () => {
      const active = !isIntersecting || isOpen;
      header.classList.toggle("bg-[#004B93]", active);
      header.classList.toggle("shadow-lg", active);
    };

    mobileMenuButton.addEventListener("click", () => {
      isOpen = !mobileMenu.classList.contains("hidden");
      updateHeader();
    });

    const observerForBackground = new IntersectionObserver(
      ([entry]) => {
        isIntersecting = entry.isIntersecting;
        if (!isOpen) updateHeader();
      },
      { threshold: 0.7 }
    );

    // do not animate header background to show it instantly like the mobile navigation if user is at the top of the page
    // add transition classes after slight scroll to enable smooth background toggle on scroll
    const observerForTransition = new IntersectionObserver(
      ([entry]) => {
        const isIntersecting = entry.isIntersecting;
        header.classList.toggle("transition-all", !isIntersecting);
        header.classList.toggle("duration-300", !isIntersecting);
      },
      { threshold: 0.9 }
    );

    observerForBackground.observe(section);
    observerForTransition.observe(section);
  });
  console.log("Build Verification: v1.0.1 - Transitions Update");
</script>
{{ end }}