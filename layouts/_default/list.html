{{ define "main" }}
<section>
  <!-- Banner Section -->
  {{ if .Params.banner_image }}
  <div class="relative w-full h-48 md:h-64"
    style="background-image: url('{{ .Params.banner_image }}'); {{ if .Params.banner_position }}background-position: {{ .Params.banner_position }};{{ else }}background-position: center;{{ end }} {{ if .Params.banner_size }}background-size: {{ .Params.banner_size }};{{ else }}background-size: cover;{{ end }}">
    <!-- Optional Overlay (if needed) -->
    <div class="absolute inset-0 bg-black bg-opacity-30"></div>
  </div>
  {{ end }}

  <!-- Title Bar -->
  <div class="bg-gray-900 text-white py-4">
    <h1 class="text-3xl font-bold text-center">{{ .Title }}</h1>
  </div>

  <!-- Check if this is a tire subpage (has featured_image_1) -->
  {{ if .Params.featured_image_1 }}
  <!-- Tire Subpage Layout - Perfectly Aligned 3 Column Layout -->
  <div class="max-w-6xl mx-auto px-4 py-8">
    <!-- Top Row: 3 Equal Columns with 16px Gaps -->
    <div class="flex flex-col lg:flex-row justify-center items-start mb-6" style="gap: 16px;">

      <!-- Featured Image 1 (Left) - Tire Image -->
      <div class="w-full lg:flex-1 lg:max-w-xs">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden"
          style="height: 320px; width: 100%; max-width: 320px; margin: 0 auto;">
          <div class="h-full flex items-center justify-center p-6">
            <img src="{{ .Params.featured_image_1 }}" alt="{{ .Title }} - Tire Image"
              class="max-w-full max-h-full object-contain rounded">
          </div>
        </div>
      </div>

      <!-- Size Table (Middle) -->
      {{ if .Params.size_table }}
      <div class="w-full lg:flex-1 lg:max-w-xs">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden"
          style="height: 320px; width: 100%; max-width: 320px; margin: 0 auto;">
          <div class="bg-gray-50 px-4 py-3 border-b">
            <h3 class="text-sm font-semibold text-gray-800 text-center">Available Sizes</h3>
          </div>
          <div class="p-3 overflow-auto" style="height: calc(100% - 3rem);">
            <img src="{{ .Params.size_table }}" alt="{{ .Title }} - Available Sizes"
              class="w-full h-auto object-contain rounded-md">
          </div>
        </div>
      </div>
      {{ else }}
      <!-- Empty middle column if no size table -->
      <div class="w-full lg:flex-1 lg:max-w-xs">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden"
          style="height: 320px; width: 100%; max-width: 320px; margin: 0 auto;">
          <div class="h-full flex items-center justify-center text-gray-400">
            <span class="text-sm">No size information</span>
          </div>
        </div>
      </div>
      {{ end }}

      <!-- Featured Image 2 (Right) - Pressure Chart -->
      {{ if .Params.featured_image_2 }}
      <div class="w-full lg:flex-1 lg:max-w-xs">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden"
          style="height: 320px; width: 100%; max-width: 320px; margin: 0 auto;">
          <div class="h-full flex items-center justify-center p-6">
            <img src="{{ .Params.featured_image_2 }}" alt="{{ .Title }} - Pressure Chart"
              class="max-w-full max-h-full object-contain rounded">
          </div>
        </div>
      </div>
      {{ else }}
      <!-- Empty right column if no second image -->
      <div class="w-full lg:flex-1 lg:max-w-xs">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden"
          style="height: 320px; width: 100%; max-width: 320px; margin: 0 auto;">
          <div class="h-full flex items-center justify-center text-gray-400">
            <span class="text-sm">No pressure information</span>
          </div>
        </div>
      </div>
      {{ end }}

    </div>
  </div>

  <!-- Spec Table - Exactly matches the width of the 3 columns above -->
  {{ if .Params.spec_table }}
  <div class="max-w-6xl mx-auto px-4 pb-8">
    <!-- Total width: 3 × 320px + 2 × 16px = 992px -->
    <div class="bg-white rounded-lg shadow-lg overflow-hidden mx-auto" style="width: 992px; max-width: 100%;">
      <div class="bg-gray-50 px-6 py-4 border-b">
        <h3 class="text-lg font-semibold text-gray-800 text-center">Technical Specifications</h3>
      </div>
      <div class="p-6">
        <img src="{{ .Params.spec_table }}" alt="{{ .Title }} - Technical Specifications"
          class="w-full h-auto rounded-md shadow-sm">
      </div>
    </div>
  </div>
  {{ end }}

  {{ else }}
  <!-- Main Category Page Layout (Original) -->
  <div class="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-4 gap-4">
    <!-- Text Content -->
    <div class="md:col-span-3">
      <div class="prose max-w-none text-gray-700 mb-8">
        {{ .Content | safeHTML }}
      </div>
    </div>

    <!-- Featured Image -->
    <div>
      {{ if .Params.featured_image }}
      <div class="p-4">
        <img src="{{ .Params.featured_image }}" alt="{{ .Title }}"
          class="rounded shadow-lg mx-auto w-full h-auto object-contain">
      </div>
      {{ end }}
    </div>
  </div>
  {{ end }}

</section>
{{ end }}